.button-bar.context_menu(ng-app="gradecraft" ng-controller="AssignmentCtrl" ng-init="init(#{@assignment[:id]}, #{@assignment.use_rubric})")
  %ul.button-group
    - if @assignment.persisted?
      %li
        %a.button{:href => edit_assignment_path(@assignment) }
          %i.fa.fa-edit
          Edit
      - if @team.present? && ! ( @assignment.rubric and @assignment.rubric.designed? and @assignment.use_rubric? )
        %li
          %a.button{:href => mass_grade_assignment_path(@assignment, :team_id => @team) }
            %i.fa.fa-check
            Quick Grade
      - elsif ! ( @assignment.rubric and @assignment.rubric.designed? and @assignment.use_rubric? )
        %li
          %a.button{:href => mass_grade_assignment_path(@assignment) }
            %i.fa.fa-check
            Quick Grade
      - if @assignment.submissions.present?
        %li
          %a.button{:href => export_submissions_assignment_path(@assignment, :team_id => @team, format: 'zip') }
            %i.fa.fa-zip-o
            Download Submissions
      %li
        %a.button{:href => import_grades_assignment_path(@assignment) }
          %i.fa.fa-upload
          Import Grades
      %li
        %a.button{:href => export_grades_assignment_path(@assignment, format: 'csv') }
          %i.fa.fa-download
          Download Grades
      %li
        %a.button{:href => design_assignment_rubric_path(@assignment) }
          %i.fa.fa-sliders
          - if @assignment.rubric and @assignment.rubric.designed?
            Edit Rubric
          - else
            Create Rubric

      - if @assignment.rubric and @assignment.rubric.designed?
        - if @assignment.grades.instructor_modified.present?
          %li
            %a.button{:href => rubric_grades_review_assignment_path(@assignment) }
              Review Grades
        %li.loading(ng-cloak ng-hide="window.angular")
          %a.button(ng-click="")
            %i.fa.fa-table
            Rubrics
        %li.on(ng-cloak ng-show="useRubric")
          %a.button(ng-click="rubricsOff()")
            %i.fa.fa-power-off
            Rubrics On
        %li.off(ng-cloak ng-hide="useRubric")
          %a.button(ng-click="rubricsOn()")
            %i.fa.fa-power-off
            Rubrics Off
