= content_nav_for User, "Staff"

%h3.pagetitle= @title

.pageContent
  = render 'layouts/alerts'
  
  %table.nofeatures_default_last_name_dynatable
    %thead
      %tr
        %th First Name
        %th Last Name
        %th Role
        %th #{term_for :team}
        %th{:style => "min-width: 200px"}
    %tbody
      - @staff.each do |user|
        %tr
          %td
            - if user.avatar_file_name.present?
              %img.img-rounded{:src => user.avatar_file_name, :width => 30} 
            = link_to user.first_name, staff_path(user)
          %td= link_to user.last_name, staff_path(user)
          %td= user.course_memberships.where(:course_id => current_course.id).first.role.capitalize
          %td
            - user.team_leaderships_for_course(current_course).each do |leadership|
              %div= link_to leadership.team.try(:name), leadership.team
          %td
            .right
              %ul
                %li= link_to raw("<i class='fa fa-dashboard fa-fw'> </i> Dashboard"),  staff_path(user), {:class => 'button'}
                %li= link_to raw("<i class='fa fa-edit fa-fw'> </i> Edit"),  edit_user_path(user), {:class => 'button'}
                %li= link_to raw("<i class='fa fa-trash fa-fw'> </i> Delete"),  user, :class => 'button', :data => { confirm: 'Are you sure?'}, :method => :delete