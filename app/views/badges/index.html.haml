.small-12.panel.mainContent
  / Badge Navigation
  - if current_user.is_staff?
    = content_nav_for Badge do
      %li= link_to "Create New #{term_for :badge}", new_badge_path, :class => "button tiny radius"
  - else
    = content_nav_for Badge do
      %li= link_to "My Dashboard", dashboard_path, :class => "button tiny radius"

  .small-12.columns
    %h2= @title

    %table.responsive.simpleTable
      %thead
        %tr
          %th.sortable{"data-sort" => "string"} Icon
          %th.sortable{"data-sort" => "string"} Description
          - if current_course.valuable_badges?
            %th{"data-sort" => "int"} Value
          - if current_user.is_staff?
            %th.sortable{"data-sort" => "string"} Visible to Students
            %th{:width => "300"}
      %tbody
        - current_course_data.badges.each do |badge|
          - if current_user.is_staff?
            %tr
              %td
                %img{:src => badge.icon, :alt => badge.name, :width => "40"}
                %td
                  .bold= link_to badge.name, badge_path(badge)
                  = raw badge.description
                - if current_course.valuable_badges?
                  %td= points badge.point_total
                %td
                  - if badge.visible?
                    Yes
                  - else
                    No
                %td
                  .button-bar
                    %ul.button-group.radius.round
                      %li= link_to "Quick Award", mass_award_badge_path(badge), :class => "button tiny secondary"
                      %li= link_to 'Edit', edit_badge_path(badge), :class => 'button tiny secondary'
                      %li= link_to 'Delete', badge_path(badge), :class => 'button tiny secondary', :data => { confirm: 'Are you sure?' }, :method => :delete
          - else
            - if badge.visible?
              %tr
                %td
                  %img{:src => badge.icon, :alt => badge.name}
                %td
                  = link_to badge.name, badge_path(badge)
                  = raw badge.description
                %td
                  %ul
                    - badge.tasks.each do |task|
                      %li= task.name
                - if current_course.valuable_badges?
                  %td= badge.point_total
  .clearfix
