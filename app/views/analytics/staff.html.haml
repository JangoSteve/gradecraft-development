= content_nav_for "Analytics"

.col-lg-12.col-md-12.col-sm-12.col-xs-12

  %h1 Course Analytics - Staff
  = render "tabs"

  .navbar.navbar-inverse.section-heading
    %h2 Interactions
  .row.analytics-row
    .col-lg-12.col-sm-12.col-md-12
      / Event counts
      = analytics_chart_inputs('role-events-chart', 'past_week')
      #role-events-chart.analytics-chart{:data => {:chart => 'timeseries', :url => '/analytics/role_events.json', :url_data => 'role_group=staff', :title => 'Interactions', :subtitle => '{{granularity}}', :y_axis_label => 'Number of events'}}
      -##events-chart{:data => {:chart => 'timeseries', :url => '/analytics/assignment_events.json', :title => 'Assignment Events', :subtitle => '{{granularity}}', :y_axis_label => 'Number of events'}}

  .navbar.navbar-inverse.section-heading
    %h2 Pageviews
  .row.analytics-row
    .col-lg-6.col-sm-12.col-md-12
      / Pageviews Total
      = analytics_chart_inputs('all-pageviews-chart', 'past_week')
      #all-pageviews-chart.analytics-chart{:data => {:chart => 'timeseries', :url => '/analytics/all_role_pageview_events.json?role_group=staff', :title => 'Pageviews', :subtitle => '{{granularity}}'}}

    .col-lg-6.col-sm-12.col-md-12
      / Pageviews per page
      = analytics_chart_inputs('pageviews-chart', 'past_week')
      %table#pageviews-chart.analytics-table{:data => {:chart => 'timeseries-table', :url => '/analytics/role_pageview_events.json?role_group=staff', :title => 'Pageviews per Page', :subtitle => '{{granularity}}'}}
        %thead
          %th{:'data-dynatable-column' => 'name'} Page
          %th{:'data-dynatable-column' => 'total'} Pageviews
        %tbody

  .navbar.navbar-inverse.section-heading
    %h2 Logins
  .row.analytics-row
    .col-lg-12.col-sm-12.col-md-6
      / Login counts
      = analytics_chart_inputs('role-logins-chart', 'past_week')
      #role-logins-chart.analytics-chart{:data => {:chart => 'timeseries', :url => '/analytics/login_role_events.json', :url_data => 'role_group=staff', :title => 'Logins', :subtitle => '{{granularity}}', :y_axis_label => 'Logins {{granularity}}'}}

    -#.col-lg-6.col-sm-12.col-md-6
      -#/ Average User Login Frequencies
      -#= analytics_chart_inputs('logins-frequencies-chart', 'past_week')
      -##logins-frequencies-chart.analytics-chart{:data => {:chart => 'timeseries', :url => '/analytics/login_frequencies.json', :title => 'Average User Login Frequencies', :subtitle => '{{granularity}}', :y_axis_label => 'User Login Rate (in logins {{granularity}})'}}
