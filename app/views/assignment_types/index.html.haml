.small-12.panel.mainContent

  = content_nav_for AssignmentType

  .small-12.medium-8
    %h3.pagetitle#tableCaption= @title

  .small-12.medium-4.right.columns.columns-no-padding
    .button-bar.right
      %ul.button-group.context_menu
        %li
          %a{:href => new_assignment_type_path }
            %i.fi-plus
            New #{term_for :assignment_type}

  .small-12.columns
    %table.responsive.nofeatures_dynatable{"aria-describedby" => "tableCaption"}
      %thead
        %tr
          %th{:scope => "col"} Name
          %th{:scope => "col"} Predictor Display
          %th{:scope => "col"} Max value
          %th.button-column
            %span.sr-only Actions
        %tbody
          - current_course_data.assignment_types.each do |assignment_type|
            %tr
              %td= link_to assignment_type.name, assignment_type
              %td= assignment_type.points_predictor_display
              %td= points assignment_type.max_value
              %td
                .button-bar
                  %ul.button-group.right.radius
                    %li
                      %a{:href => assignment_type_path(assignment_type), :class => 'button'}
                        See
                        %span.sr-only= assignment_type.name

                    %li
                      %a{:href => edit_assignment_type_path(assignment_type), :class => 'button'}
                        Edit
                        %span.sr-only= assignment_type.name
                    %li
                      %a{:href => export_scores_assignment_type_path(assignment_type.id, format: 'csv'), :class => "button"}
                        Download Scores
                    %li
                      %a{:href => assignment_type_path(assignment_type), :data => { confirm: 'Are you sure?', method: :delete }, :class => "button" }
                        Delete

  %h4.subtitle= "#{term_for :student} Scores"

  .small-12.columns
    %table.responsive.nofeatures_default_name_dynatable
      %thead
        %tr
          %th First Name
          %th Last Name
          - current_course.assignment_types.each do |at|
            %th
              = at.name
      %tbody
        - current_course.students.each do |student|
          %tr
            %td= student.first_name
            %td= student.last_name
            - current_course.assignment_types.each do |at|
              %td
                = points at.score_for_student(student)
                - if at.student_weightable?
                  = "[#{ at.raw_score_for_student(student)}]"
                  %span.sr-only= assignment_type.name
