%html(lang="en")
  %head
    %meta(charset="utf-8")
    %meta(name="viewport" content="width=device-width, initial-scale=1")
    %title
      = "#{@title.titleize} - " if @title
      = current_course.try(:name) || 'GradeCraft'
    = stylesheet_link_tag "application", :media => "all", media: "all"
    = javascript_include_tag "vendor/modernizr"
    = csrf_meta_tags
    = yield(:head)

  %body(class="#{body_class}")
    .fixed
      %nav.top-bar.contain-to-grid{:data => {'topbar' => true}}
        %section.top-bar-section.small-6.medium-8.columns
          %ul.title-area{:role =>'banner'}
            %li.name
              %h1
                %a(href="/dashboard")
                  - if current_course
                    %span.left #{current_course.courseno}
                    %span.left.show-for-large-up= ": #{current_course.name}"
                  - else
                    GradeCraft
        - if current_user
          = render 'layouts/authenticated_nav'
    - if current_user
      - if current_user_is_staff?
        .columns.pageContainer= render 'layouts/staff'
      - else
        = render 'layouts/student'
      .small-12.columns.logged_in_footer
        %br
        = render 'layouts/footer'
    - else
      = render 'layouts/public'
      .row.panel.footer
        .small-12.columns
          = render 'layouts/footer'
    = render 'layouts/google_analytics'
    = javascript_include_tag 'application'
