.small-12.panel.mainContent
  / User Index Navigation
  = content_nav_for User do
    %li= link_to "Create a New #{term_for :student}", new_user_path, :class => "button tiny radius"

  .small-12.medium-4.large-4.columns
    %h2= @title

  - if current_course.has_teams?
    .small-12.large-4.large-offset-4.medium-4.medium-offset-4.columns
      = form_tag users_path, :method => :get do
        = select_tag :team_id, options_for_select(current_course.teams.alpha.map { |t| [t.name, t.id] }, @team.try(:id)), :prompt => "Select a #{current_course.team_term}", :class => "medium-8"
        = submit_tag 'Filter', :class => 'button tiny radius'

  .small-12.columns
    %table.responsive.simpleTable
      %thead
        %tr
          %th.sortable{"data-sort" => "string"} First Name
          %th.sortable{"data-sort" => "string"} Last Name
          %th.sortable{"data-sort" => "string"} Email
          %th.sortable{"data-sort" => "string"} Role
          %th.sortable{"data-sort" => "string"} #{term_for :team}
          %th.sortable{"data-sort" => "int"} Score
          %th
      %tbody
        - @users.each do |user|
          %tr
            %td
              = user.first_name
            %td= user.last_name
            %td= user.email
            %td= user.role.capitalize
            %td
              - user.teams.each do |team|
                = link_to team.name, team
            %td
              - if user.is_student?
                = points user.score_for_course(current_course) if user.respond_to?(:grades)
            %td
              .button-bar
                %ul.button-group.radius.round
                  %li
                    = link_to "Dashboard", student_path(user), :class => 'button tiny radius' if user.is_student?
                    = link_to "Dashboard", staff_path(user), :class => 'button tiny radius' if user.is_staff?
                  %li= link_to 'Edit', edit_user_path(user), :class => 'button tiny'
                  %li= link_to 'Delete', user, :class => 'button tiny', :data => { confirm: 'This will delete the student from GradeCraft - Are you sure?' } , :method => :delete

  .clearfix