/*! tableSorter 2.4+ widgets - updated 12/18/2012
 *
 * Column Styles
 * Column Filters
 * Column Resizing
 * Sticky Header
 * UI Theme (generalized)
 * Save Sort
 * ["zebra", "uitheme", "stickyHeaders", "filter", "columns"]
 */
/*jshint browser:true, jquery:true, unused:false, loopfunc:true */
/*global jQuery: false, localStorage: false, navigator: false */
(function(e){"use strict";e.tablesorter=e.tablesorter||{},e.tablesorter.themes={bootstrap:{table:"table table-bordered table-striped",header:"bootstrap-header",footerRow:"",footerCells:"",icons:"",sortNone:"bootstrap-icon-unsorted",sortAsc:"icon-chevron-up",sortDesc:"icon-chevron-down",active:"",hover:"",filterRow:"",even:"",odd:""},jui:{table:"ui-widget ui-widget-content ui-corner-all",header:"ui-widget-header ui-corner-all ui-state-default",footerRow:"",footerCells:"",icons:"ui-icon",sortNone:"ui-icon-carat-2-n-s",sortAsc:"ui-icon-carat-1-n",sortDesc:"ui-icon-carat-1-s",active:"ui-state-active",hover:"ui-state-hover",filterRow:"",even:"ui-widget-content",odd:"ui-state-default"}},e.tablesorter.storage=function(t,n,r){var i,s,o=!1,u={},a=t.id||e(".tablesorter").index(e(t)),f=window.location.pathname;try{o=!!localStorage.getItem}catch(l){}e.parseJSON&&(o?u=e.parseJSON(localStorage[n])||{}:(s=document.cookie.split(/[;\s|=]/),i=e.inArray(n,s)+1,u=i!==0?e.parseJSON(s[i])||{}:{}));if(!(r&&JSON&&JSON.hasOwnProperty("stringify")))return u&&u.hasOwnProperty(f)&&u[f].hasOwnProperty(a)?u[f][a]:{};u[f]&&u[f][a]?u[f][a]=r:u[f]?u[f][a]=r:(u[f]={},u[f][a]=r),o?localStorage[n]=JSON.stringify(u):(i=new Date,i.setTime(i.getTime()+31536e6),document.cookie=n+"="+JSON.stringify(u).replace(/\"/g,'"')+"; expires="+i.toGMTString()+"; path=/")},e.tablesorter.addWidget({id:"uitheme",format:function(t){var n,r,i,s,o,u=e(t),a=t.config,f=a.widgetOptions,l=typeof f.uitheme=="object"?"jui":f.uitheme||"jui",c=typeof f.uitheme=="object"&&!Object.prototype.toString.call(f.uitheme).test("Array")?f.uitheme:e.tablesorter.themes[e.tablesorter.themes.hasOwnProperty(l)?l:"jui"],h=e(a.headerList),p="tr."+(f.stickyHeaders||"tablesorter-stickyHeader"),d=c.sortNone+" "+c.sortDesc+" "+c.sortAsc;a.debug&&(n=new Date);if(!u.hasClass("tablesorter-"+l)||a.theme===l||!t.hasInitialized)c.even!==""&&(f.zebra[0]+=" "+c.even),c.odd!==""&&(f.zebra[1]+=" "+c.odd),o=u.removeClass(a.theme===""?"":"tablesorter-"+a.theme).addClass("tablesorter-"+l+" "+c.table).find("tfoot"),o.length&&o.find("tr").addClass(c.footerRow).children("th, td").addClass(c.footerCells),a.theme="",h.addClass(c.header).filter(":not(.sorter-false)").hover(function(){e(this).addClass(c.hover)},function(){e(this).removeClass(c.hover)}),h.find(".tablesorter-wrapper").length||h.wrapInner('<div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%"></div>'),a.cssIcon&&h.find("."+a.cssIcon).addClass(c.icons),u.hasClass("hasFilters")&&h.find(".tablesorter-filter-row").addClass(c.filterRow);e.each(h,function(t){i=e(this),s=a.cssIcon?i.find("."+a.cssIcon):i,this.sortDisabled?(i.removeClass(d),s.removeClass(d+" tablesorter-icon "+c.icons)):(o=u.hasClass("hasStickyHeaders")?u.find(p).find("th").eq(t).add(i):i,r=i.hasClass(a.cssAsc)?c.sortAsc:i.hasClass(a.cssDesc)?c.sortDesc:i.hasClass(a.cssHeader)?c.sortNone:"",i[r===c.sortNone?"removeClass":"addClass"](c.active),s.removeClass(d).addClass(r))}),a.debug&&e.tablesorter.benchmark("Applying "+l+" theme",n)},remove:function(t,n,r){var i=e(t),s=typeof r.uitheme=="object"?"jui":r.uitheme||"jui",o=typeof r.uitheme=="object"?r.uitheme:e.tablesorter.themes[e.tablesorter.themes.hasOwnProperty(s)?s:"jui"],u=i.children("thead").children(),a=o.sortNone+" "+o.sortDesc+" "+o.sortAsc;i.removeClass("tablesorter-"+s+" "+o.table).find(n.cssHeader).removeClass(o.header),u.unbind("mouseenter mouseleave").removeClass(o.hover+" "+a+" "+o.active).find(".tablesorter-filter-row").removeClass(o.filterRow),u.find(".tablesorter-icon").removeClass(o.icons)}}),e.tablesorter.addWidget({id:"columns",format:function(t){var n,r,i,s,o,u,a,f,l,c,h=e(t),p=t.config,d=p.widgetOptions,v=h.children("tbody:not(."+p.cssInfoBlock+")"),m=p.sortList,g=m.length,y=["primary","secondary","tertiary"];y=p.widgetColumns&&p.widgetColumns.hasOwnProperty("css")?p.widgetColumns.css||y:d&&d.hasOwnProperty("columns")?d.columns||y:y,u=y.length-1,a=y.join(" "),p.debug&&(o=new Date);for(l=0;l<v.length;l++)n=e.tablesorter.processTbody(t,e(v[l]),!0),r=n.children("tr"),c=r.length,r.each(function(){s=e(this);if(this.style.display!=="none"){i=s.children().removeClass(a);if(m&&m[0]){i.eq(m[0][0]).addClass(y[0]);if(g>1)for(f=1;f<g;f++)i.eq(m[f][0]).addClass(y[f]||y[u])}}}),e.tablesorter.processTbody(t,n,!1);r=d.columns_thead!==!1?"thead tr":"",d.columns_tfoot!==!1&&(r+=(r===""?"":",")+"tfoot tr");if(r.length){s=h.find(r).children().removeClass(a);if(m&&m[0]){s.filter('[data-column="'+m[0][0]+'"]').addClass(y[0]);if(g>1)for(f=1;f<g;f++)s.filter('[data-column="'+m[f][0]+'"]').addClass(y[f]||y[u])}}p.debug&&e.tablesorter.benchmark("Applying Columns widget",o)},remove:function(t,n,r){var i,s,o=e(t).children("tbody:not(."+n.cssInfoBlock+")"),u=(n.widgetOptions.columns||["primary","secondary","tertiary"]).join(" ");for(i=0;i<o.length;i++)s=e.tablesorter.processTbody(t,e(o[i]),!0),s.children("tr").each(function(){e(this).children().removeClass(u)}),e.tablesorter.processTbody(t,s,!1)}}),e.tablesorter.addWidget({id:"filter",format:function(t){if(t.config.parsers&&!e(t).hasClass("hasFilters")){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E="",S=e.tablesorter,x=t.config,T=e(x.headerList),N=x.widgetOptions,C=N.filter_cssFilter||"tablesorter-filter",k=e(t).addClass("hasFilters"),L=k.children("tbody:not(."+x.cssInfoBlock+")"),A=x.parsers.length,O=[/^\/((?:\\\/|[^\/])+)\/([mig]{0,3})?$/,new RegExp(x.cssChildRow),/undefined|number/,/(^[\"|\'|=])|([\"|\'|=]$)/,/[\"\'=]/g,/[^\w,. \-()]/g,/[<>=]/g],M=T.map(function(t){return S.getData?S.getData(T.filter('[data-column="'+t+'"]:last'),x.headers[t],"filter")==="parsed":e(this).hasClass("filter-parsed")}).get(),_,D,P=function(t){var n=e.isArray(t),r=k.find("thead").eq(0).children("tr").find("select."+C+", input."+C),i=n?t:r.map(function(){return e(this).val()||""}).get(),s=(i||[]).join("");n&&r.each(function(n,r){e(r).val(t[n]||"")}),N.filter_hideFilters===!0&&k.find(".tablesorter-filter-row").trigger(s===""?"mouseleave":"mouseenter");if(E===s&&t!==!1)return;k.trigger("filterStart",[i]);if(!x.showProcessing)return H(t,i,s),!1;setTimeout(function(){return H(t,i,s),!1},30)},H=function(s,u,l){var c,h,p,d,v,b,w,C,_;x.debug&&(C=new Date);for(i=0;i<L.length;i++){c=e.tablesorter.processTbody(t,e(L[i]),!0),h=c.children("tr"),b=h.length;if(l===""||N.filter_serversideFiltering)h.show().removeClass("filtered");else for(r=0;r<b;r++){if(O[1].test(h[r].className))continue;v=!0,d=h.eq(r).nextUntil("tr:not(."+x.cssChildRow+")"),y=d.length&&(N&&N.hasOwnProperty("filter_childRows")&&typeof N.filter_childRows!="undefined"?N.filter_childRows:!0)?d.text():"",y=N.filter_ignoreCase?y.toLocaleLowerCase():y,p=h.eq(r).children("td");for(n=0;n<A;n++)if(u[n]){N.filter_useParsedData||M[n]?a=x.cache[i].normalized[r][n]:a=e.trim(p.eq(n).text()),f=!O[2].test(typeof a)&&N.filter_ignoreCase?a.toLocaleLowerCase():a,w=v,o=N.filter_ignoreCase?u[n].toLocaleLowerCase():u[n];if(N.filter_functions&&N.filter_functions[n])N.filter_functions[n]===!0?w=T.filter('[data-column="'+n+'"]:last').hasClass("filter-match")?f.search(o)>=0:u[n]===a:typeof N.filter_functions[n]=="function"?w=N.filter_functions[n](a,x.cache[i].normalized[r][n],u[n],n):typeof N.filter_functions[n][u[n]]=="function"&&(w=N.filter_functions[n][u[n]](a,x.cache[i].normalized[r][n],u[n],n));else if(O[0].test(o)){m=O[0].exec(o);try{w=(new RegExp(m[1],m[2])).test(f)}catch(D){w=!1}}else O[3].test(o)&&f===o.replace(O[4],"")?w=!0:/^\!/.test(o)?(o=o.replace("!",""),g=f.search(e.trim(o)),w=o===""?!0:!(N.filter_startsWith?g===0:g>=0)):/^[<>]=?/.test(o)?(m=isNaN(f)?e.tablesorter.formatFloat(f.replace(O[5],""),t):e.tablesorter.formatFloat(f,t),g=e.tablesorter.formatFloat(o.replace(O[5],"").replace(O[6],""),t),/>/.test(o)&&(w=/>=/.test(o)?m>=g:m>g),/</.test(o)&&(w=/<=/.test(o)?m<=g:m<g)):/[\?|\*]/.test(o)?w=(new RegExp(o.replace(/\?/g,"\\S{1}").replace(/\*/g,"\\S*"))).test(f):(a=(f+y).indexOf(o),w=!N.filter_startsWith&&a>=0||N.filter_startsWith&&a===0);v=w?v?!0:!1:!1}h[r].style.display=v?"":"none",h.eq(r)[v?"removeClass":"addClass"]("filtered"),d.length&&d[v?"show":"hide"]()}e.tablesorter.processTbody(t,c,!1)}E=l,x.debug&&S.benchmark("Completed filter widget search",C),k.trigger("applyWidgets"),k.trigger("filterEnd")},B=function(n,o){var u,a=[];n=parseInt(n,10),u='<option value="">'+(T.filter('[data-column="'+n+'"]:last').attr("data-placeholder")||"")+"</option>";for(i=0;i<L.length;i++){s=x.cache[i].row.length;for(r=0;r<s;r++)N.filter_useParsedData?a.push(""+x.cache[i].normalized[r][n]):(y=x.cache[i].row[r][0].cells[n],y&&a.push(e.trim(x.supportsTextContent?y.textContent:e(y).text())))}a=e.grep(a,function(t,n){return e.inArray(t,a)===n}),a=S.sortText?a.sort(function(e,r){return S.sortText(t,e,r,n)}):a.sort(!0);for(i=0;i<a.length;i++)u+='<option value="'+a[i]+'">'+a[i]+"</option>";k.find("thead").find("select."+C+'[data-column="'+n+'"]')[o?"html":"append"](u)},j=function(e){for(n=0;n<A;n++)y=T.filter('[data-column="'+n+'"]:last'),y.hasClass("filter-select")&&!y.hasClass("filter-false")&&(!N.filter_functions||N.filter_functions[n]!==!0)&&(N.filter_functions||(N.filter_functions={}),N.filter_functions[n]=!0,B(n,e))};x.debug&&(_=new Date),N.filter_ignoreCase=N.filter_ignoreCase!==!1,N.filter_useParsedData=N.filter_useParsedData===!0;if(N.filter_columnFilters!==!1&&T.filter(".filter-false").length!==T.length){y='<tr class="tablesorter-filter-row">';for(n=0;n<A;n++)b=!1,v=T.filter('[data-column="'+n+'"]:last'),c=N.filter_functions&&N.filter_functions[n]&&typeof N.filter_functions[n]!="function"||v.hasClass("filter-select"),y+="<td>",c?y+='<select data-column="'+n+'" class="'+C:y+='<input type="search" placeholder="'+(v.attr("data-placeholder")||"")+'" data-column="'+n+'" class="'+C,S.getData?(b=S.getData(v[0],x.headers[n],"filter")==="false",y+=b?' disabled" disabled':'"'):(b=x.headers[n]&&x.headers[n].hasOwnProperty("filter")&&x.headers[n].filter===!1||v.hasClass("filter-false"),y+=b?' disabled" disabled':'"'),y+=(c?"></select>":">")+"</td>";k.find("thead").eq(0).append(y+="</tr>")}k.bind("addRows updateCell update appendCache search".split(" ").join(".tsfilter "),function(e,t){return e.type!=="search"&&j(!0),P(e.type==="search"?t:""),!1}).find("input."+C).bind("keyup search",function(e,t){if(e.which<32&&e.which!==8||e.which>=37&&e.which<=40)return;if(typeof t!="undefined")return P(t),!1;clearTimeout(D),D=setTimeout(function(){P()},N.filter_searchDelay||300)}),N.filter_reset&&e(N.filter_reset).length&&e(N.filter_reset).bind("click",function(){return k.find("."+C).val(""),P(),!1});if(N.filter_functions)for(w in N.filter_functions)if(N.filter_functions.hasOwnProperty(w)&&typeof w=="string"){y=T.filter('[data-column="'+w+'"]:last'),u="";if(N.filter_functions[w]===!0&&!y.hasClass("filter-false"))B(w);else if(typeof w=="string"&&!y.hasClass("filter-false")){for(h in N.filter_functions[w])typeof h=="string"&&(u+=u===""?'<option value="">'+(y.attr("data-placeholder")||"")+"</option>":"",u+='<option value="'+h+'">'+h+"</option>");k.find("thead").find("select."+C+'[data-column="'+w+'"]').append(u)}}j(),k.find("select."+C).bind("change search",function(){P()}),N.filter_hideFilters===!0&&k.find(".tablesorter-filter-row").addClass("hideme").bind("mouseenter mouseleave",function(t){var n,r=t;p=e(this),clearTimeout(l),l=setTimeout(function(){/enter|over/.test(r.type)?p.removeClass("hideme"):e(document.activeElement).closest("tr")[0]!==p[0]&&(n=k.find("."+(N.filter_cssFilter||"tablesorter-filter")).map(function(){return e(this).val()||""}).get().join(""),n===""&&p.addClass("hideme"))},200)}).find("input, select").bind("focus blur",function(t){d=e(this).closest("tr"),clearTimeout(l),l=setTimeout(function(){k.find("."+(N.filter_cssFilter||"tablesorter-filter")).map(function(){return e(this).val()||""}).get().join("")===""&&d[t.type==="focus"?"removeClass":"addClass"]("hideme")},200)}),x.showProcessing&&k.bind("filterStart filterEnd",function(t,n){var r=n?k.find("."+x.cssHeader).filter("[data-column]").filter(function(){return n[e(this).data("column")]!==""}):"";S.isProcessing(k[0],t.type==="filterStart",n?r:"")}),x.debug&&S.benchmark("Applying Filter widget",_),k.trigger("filterInit")}},remove:function(t,n,r){var i,s,o=e(t),u=o.children("tbody:not(."+n.cssInfoBlock+")");o.removeClass("hasFilters").unbind("addRows updateCell update appendCache search".split(" ").join(".tsfilter")).find(".tablesorter-filter-row").remove();for(i=0;i<u.length;i++)s=e.tablesorter.processTbody(t,e(u[i]),!0),s.children().removeClass("filtered").show(),e.tablesorter.processTbody(t,s,!1);r.filterreset&&e(r.filter_reset).unbind("click")}}),e.tablesorter.addWidget({id:"stickyHeaders",format:function(t){if(e(t).hasClass("hasStickyHeaders"))return;var n=e(t).addClass("hasStickyHeaders"),r=t.config,i=r.widgetOptions,s=e(window),o=e(t).children("thead:first"),u=o.children("tr:not(.sticky-false)").children(),a=i.stickyHeaders||"tablesorter-stickyHeader",f=".tablesorter-header-inner",l=u.eq(0).parent(),c=n.find("tfoot"),h=n.clone(),p=h.children("thead:first").addClass(a).css({width:o.outerWidth(!0),position:"fixed",margin:0,top:0,visibility:"hidden",zIndex:1}),d=p.children("tr:not(.sticky-false)").children(),v="",m=0,g=function(){var t=navigator.userAgent;m=0,n.css("border-collapse")!=="collapse"&&!/(webkit|msie)/i.test(t)&&(m=parseInt(u.eq(0).css("border-left-width"),10)*2),p.css({left:o.offset().left-s.scrollLeft()-m,width:o.outerWidth()}),d.each(function(t){var n=u.eq(t);e(this).css({width:n.width()-m,height:n.height()})}).find(f).each(function(t){var n=u.eq(t).find(f),r=n.width();e(this).width(r)})};h.find("thead:gt(0),tr.sticky-false,tbody,tfoot,caption").remove(),h.css({height:0,width:0,padding:0,margin:0,border:0}),p.find("tr.sticky-false").remove(),d.find(".tablesorter-resizer").remove(),n.bind("sortEnd.tsSticky",function(){u.each(function(t){var n=d.eq(t);n.attr("class",e(this).attr("class")),r.cssIcon&&n.find("."+r.cssIcon).attr("class",e(this).find("."+r.cssIcon).attr("class"))})}).bind("pagerComplete.tsSticky",function(){g()}),u.find("*").andSelf().filter(r.selectorSort).each(function(t){var n=e(this);d.eq(t).bind("mouseup",function(e){n.trigger(e,!0)}).bind("mousedown",function(){return this.onselectstart=function(){return!1},!1})}),n.after(h),s.bind("scroll.tsSticky",function(){var e=l.offset(),t=s.scrollTop(),r=n.height()-(p.height()+(c.height()||0)),i=t>e.top&&t<e.top+r?"visible":"hidden";p.css({left:o.offset().left-s.scrollLeft()-m,visibility:i}),i!==v&&(g(),v=i)}).bind("resize.tsSticky",function(){g()})},remove:function(t,n,r){var i=e(t),s=r.stickyHeaders||"tablesorter-stickyHeader";i.removeClass("hasStickyHeaders").unbind("sortEnd.tsSticky pagerComplete.tsSticky").find("."+s).remove(),e(window).unbind("scroll.tsSticky resize.tsSticky")}}),e.tablesorter.addWidget({id:"resizable",format:function(t){if(e(t).hasClass("hasResizable"))return;e(t).addClass("hasResizable");var n,r,i,s,o,u=e(t),a=t.config,f=a.widgetOptions,l=0,c=null,h=null,p=function(){l=0,c=h=null,e(window).trigger("resize")};i=e.tablesorter.storage&&f.resizable!==!1?e.tablesorter.storage(t,"tablesorter-resizable"):{};if(i)for(r in i)!isNaN(r)&&r<a.headerList.length&&e(a.headerList[r]).width(i[r]);u.children("thead:first").find("tr").each(function(){s=e(this).children(),e(this).find(".tablesorter-wrapper").length||s.wrapInner('<div class="tablesorter-wrapper" style="position:relative;height:100%;width:100%"></div>'),s=s.slice(0,-1),o=o?o.add(s):s}),o.each(function(){n=e(this),r=parseInt(n.css("padding-right"),10)+8,n.find(".tablesorter-wrapper").append('<div class="tablesorter-resizer" style="cursor:w-resize;position:absolute;height:100%;width:16px;right:-'+r+'px;top:0;z-index:1;"></div>')}).bind("mousemove.tsresize",function(e){if(l===0||!c)return;var t=e.pageX-l;c.width(c.width()+t),h.width(h.width()-t),l=e.pageX}).bind("mouseup.tsresize",function(){e.tablesorter.storage&&c&&(i[c.index()]=c.width(),i[h.index()]=h.width(),f.resizable!==!1&&e.tablesorter.storage(t,"tablesorter-resizable",i)),p()}).find(".tablesorter-resizer").bind("mousedown",function(t){c=e(t.target).parents("th:last"),h=c.next(),l=t.pageX}),u.find("thead:first").bind("mouseup.tsresize mouseleave.tsresize",function(e){p()}).bind("contextmenu.tsresize",function(){e.tablesorter.resizableReset(t);var n=e.isEmptyObject?e.isEmptyObject(i):i==={};return i={},n})},remove:function(t,n,r){e(t).removeClass("hasResizable").find("thead").unbind("mouseup.tsresize mouseleave.tsresize contextmenu.tsresize").find("tr").children().unbind("mousemove.tsresize mouseup.tsresize").find(".tablesorter-wrapper").each(function(){e(this).find(".tablesorter-resizer").remove(),e(this).replaceWith(e(this).contents())}),e.tablesorter.resizableReset(t)}}),e.tablesorter.resizableReset=function(t){e(t.config.headerList).width("auto"),e.tablesorter.storage(t,"tablesorter-resizable",{})},e.tablesorter.addWidget({id:"saveSort",init:function(e,t){t.format(e,!0)},format:function(t,n){var r,i,s=t.config,o=s.widgetOptions,u=o.saveSort!==!1,a={sortList:s.sortList};s.debug&&(i=new Date),e(t).hasClass("hasSaveSort")?u&&t.hasInitialized&&e.tablesorter.storage&&(e.tablesorter.storage(t,"tablesorter-savesort",a),s.debug&&e.tablesorter.benchmark("saveSort widget: Saving last sort: "+s.sortList,i)):(e(t).addClass("hasSaveSort"),a="",e.tablesorter.storage&&(r=e.tablesorter.storage(t,"tablesorter-savesort"),a=r&&r.hasOwnProperty("sortList")&&e.isArray(r.sortList)?r.sortList:"",s.debug&&e.tablesorter.benchmark('saveSort: Last sort loaded: "'+a+'"',i)),n&&a&&a.length>0?s.sortList=a:t.hasInitialized&&a&&a.length>0&&e(t).trigger("sorton",[a]))},remove:function(t,n,r){e.tablesorter.storage(t,"tablesorter-savesort","")}})})(jQuery);